<!DOCTYPE html>
<html>
<head>
    <title>ChromaDB Browser Test</title>
    <script type="module">
        import { ChromaClient } from 'https://esm.sh/chromadb@1.10.5';
        
        async function testChromaDB() {
            const output = document.getElementById('output');
            
            try {
                output.innerHTML += 'üîµ Testing ChromaDB from browser...<br>';
                
                const client = new ChromaClient({
                    path: 'http://localhost:8000'
                });
                
                output.innerHTML += '‚úÖ Client created<br>';
                
                const heartbeat = await client.heartbeat();
                output.innerHTML += '‚úÖ Heartbeat: ' + heartbeat + '<br>';
                
                const collections = await client.listCollections();
                output.innerHTML += '‚úÖ Collections: ' + collections.length + '<br>';
                
                const collection = await client.getOrCreateCollection({
                    name: 'property_embeddings',
                    metadata: { 'hnsw:space': 'cosine' }
                });
                
                output.innerHTML += '‚úÖ Collection: ' + collection.name + '<br>';
                
                const count = await collection.count();
                output.innerHTML += '‚úÖ Items in collection: ' + count + '<br>';
                
                output.innerHTML += '<br><strong style="color: green;">üéâ ChromaDB is working in browser!</strong>';
                
            } catch (error) {
                output.innerHTML += '<br><strong style="color: red;">‚ùå Error: ' + error.message + '</strong><br>';
                output.innerHTML += '<pre>' + error.stack + '</pre>';
            }
        }
        
        window.onload = testChromaDB;
    </script>
</head>
<body>
    <h1>ChromaDB Browser Test</h1>
    <div id="output" style="font-family: monospace; padding: 20px; background: #f0f0f0;"></div>
</body>
</html>
